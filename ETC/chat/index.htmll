<!DOCTYPE html>
<meta charset=utf-8>
<title>簡単なチャットシステム</title>
<meta name=viewport content="width=320">
<style>
*{margin:0;padding:0;font-size:40px;line-height:46px;font-family:sans-serif;
box-sizing:border-box;}
#wrap{
	width:320px;
	margin:0 auto;
}
input{
	padding:2px;
	border:none;
	line-height:48px;
	border-width:0 1px 1px 1px;
	border-style:solid;
	border-color:#000;
	width:100%;
	font-size:40px;
	border-radius:0px;
	
	transition:transform 0.5s linear;
}


li{
	list-style:none;
	margin-top:5px;padding:5px;
	border-radius:50%;
	font-size:30px;
	text-align:center;
}
li:nth-of-type(5n){background-color:#fee;}
li:nth-of-type(5n+1){background-color:#ffe;}
li:nth-of-type(5n+2){background-color:#efe;}
li:nth-of-type(5n+3){background-color:#eff;}
li:nth-of-type(5n+4){background-color:#eef;}


#msg:before{content:"<ol>";}
#msg:after{content:"</ol>";}

button{
	border-width:0 1px 1px 1px;
	border-style:solid;
	border-color:#000;
	font-size;48px;
	line-height:48px;width:100%;
	background-color:#eef;
}


header h1{color:white;background-color:black;font-size:20px;padding:5px;text-align:center;display:block;}

</style>

<div id=wrap>
<header>
	<h1>XMLHttpRequestチャット</h1>
</header>

<div class=item>
	<input type=text id=nickname placeholder="名前"><br>
</div>
<div class=item>
	<input type=text id=naiyou placeholder="投稿" required>
</div>
	<button onclick="toukou()">投稿</button>
	
	<div id="msg2"></div>
</div>

<script>
function $(id){return document.getElementById(id);}
    
//送信
function toukou(){
	if($("nickname").value==""){return;}
  var msg1=$("nickname").value +"：" + $("naiyou").value;
  var req=new XMLHttpRequest();
  req.open("GET","chat.php?msg1="+msg1);
  req.send(null);
  chat();
	$("naiyou").value="";
}

//受信
    setInterval(chat,1000);
    function chat(){
        var req=new XMLHttpRequest();
        req.open("GET","chat.php");  
        req.onreadystatechange=function(){
            $("msg2").innerHTML =req.responseText;
        }
        req.send(null);
    }
</script>