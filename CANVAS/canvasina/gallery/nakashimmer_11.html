<!DOCTYPE html>
<meta charset=utf-8>
<meta name="viewport" content="width=500">
<title>HANABI ! created by nakashimmer | Canvasina is HTML5 art scripting gallery</title>
<meta name=description content="HANABI ! created by nakashimmer | Canvasina.com is HTML5 art scripting gallery">
<link href="../canvasina/canvasina.css" rel=stylesheet>
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- for  facebook like button -->
<div id="fb-root"></div>
<script>
(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0];if(d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=141558212660855";
  fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));
</script>
<!-- facebook like button -->

<section id=wrap>
	
	<section>
		<canvas id=canvasina width=500 height=450>
			Sorry, Your browser is not chrome ,safari.
			<img src=http://canvasina.com/img/icon.png height=225><br>
			<img src=http://canvasina.com/galleryImg/nakashimmer_11.png height=225>
		</canvas>
	
	</section>

	<header>
		HANABI !
	</header>

	<footer>
		<a href="http://www.facebook.com/nakashimmer" target=_blank>created by Shunji Nakashima</a>
		<a href="/" ><h1>Canvasina</h1></a>
		<a id=share name="fb_share" type="button_count" share_url="http://canvasina.com/gallery/nakashimmer_11.html"></a>
		<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
		<div id=like style="" class="fb-like" data-href="http://canvasina.com/gallery/nakashimmer_11.html" data-width="100" 
		data-colorscheme="dark" data-layout="button_count" data-show-faces="false" data-send="false"></div>
		
	</footer>	
</section>

<script src="../canvasina/canvasina.js"></script>
<script>
color(black);
box(0,0,width,height);
var frame=0;
var HANABI = new Array(40);
var sound = new Array(40);
for(i=0;i<40;i++){
 var r=random(256);
 var g=random(256);
 var b=random(256);
 if(r===0 && g===0 && b===0)
  {r=215;g=215;b=215;}
 HANABI[i]={
  x:0,
  y:-100,
  dy:0,
  color:"rgb("+r+","+g+","+b+")"
 };

if($("canvasina").getBoundingClientRect().left>0){
 sound[i]= new Audio("http://springreen.jp/INDEX/themes/ShunsuiKobo/bg/fc.mp3");}
}
var k=0;

function random(n){
 return Math.floor(Math.random()*n);
}

var bgcolor="black";
setInterval(anime,30);

function anime(){
 frame++;
 if(random(100)<4)fire();
 c.globalAlpha = 0.15;
 color(bgcolor);
 box(0,0,500,500);
 bgcolor="black";
    
 for(j=0;j<40;j++){
  c.globalAlpha = 0.5;
  c.fillStyle = "white";
  box(HANABI[j].x,HANABI[j].y,3,10);
        
  c.globalAlpha = 1;
  HANABI[j].y-=2;
  if(HANABI[j].y==100){
   HANABI[j].y=-100;
   HANABI[j].dy=1;
   sound[j].play();
   bgcolor="white";
 }
	
 if(HANABI[j].dy==300){HANABI[j].dy=0;}	
 if(HANABI[j].dy>0){
  HANABI[j].dy++;
  for(var i=0;i<36;i++){
   circle(
    HANABI[j].x-sin(i*10)*HANABI[j].dy,
    100-cos(i*10)*HANABI[j].dy+HANABI[j].dy/3,
    2);
   fill(HANABI[j].color);
   }
  }
 }		
}

function fire(){
 HANABI[k].x = floor(Math.random()*400)+50;
 HANABI[k].y = 450;
 k++;
 if(k>=40)k=0;
}
</script>

<script type="text/javascript">
if (window==parent){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3233827-64']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
}
</script>
